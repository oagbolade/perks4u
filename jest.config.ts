/** @type {import('ts-jest/dist/types').InitialOptionsTsJest} */
import ModuleMapper from "tsconfig-paths-jest";
import tsconfig from "./tsconfig.json";

const moduleNameMapper = ModuleMapper(tsconfig);

// Bootstrap Test credentials
process.env.AUTH_SERVICE_ID = "auth_id";
process.env.AUTH_SERVICE_SECRET = "auth_secret";
process.env.AWS_BUCKET_NAME = "aws_bucket";
process.env.SERVICE_AUTH_ID = "auth_id";
process.env.SERVICE_AUTH_SECRET = "auth_secret";
process.env.SECURITY_PUBLIC_KEY = "public_key";
process.env.WEB_PUSH_DOMAIN_EMAIL = "mailto:test@test.com";
process.env.PUBLIC_VAPID_KEY =
  "BOcvGYhMoNTLUCvPr76Up_5iUfBP-Ne6Xg5tY2sxR5O5YDpo64PgUyg02cFvLz6oCx_qr-3tUUfB85Cm0j0AnfA";
process.env.PRIVATE_VAPID_KEY = "LzP0rkSz2CuB3vHy3ii6igiWYWnh5nZAsnrWsHjZPSU";
process.env.FIREBASE_SECURITY_KEYS =
  "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAidGVzdC1wZXJrc2ZvcnUtOTI1NmMiLAogICJwcml2YXRlX2tleV9pZCI6ICJwZXJrc190ZXN0X2lkOTFhODg1NjQxZjBhMGEwNjY1NTRkYWNjYWM0MTViMWQ3MWM0ZDA5ZSIsCiAgInByaXZhdGVfa2V5IjogIi0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFDZW95eGlnL1p4UHlrSFxuMjRiSE01eitLK0Qwb3lISHNBWVBwZzJxK09QeDR1TVRTZ21YUGxreVdjM3BRSGcvV0ZIK0JCNU1aTThlU1kzL1xuWDZVVHU3Y0c4blRiM3k5ZHZ6UzFFU3FwaFNLSUJLT1hHN2l3VUZKcnJEQ2N1Vi9qRGxpa0dkZzhwWDdHb1FyZFxuTzZERVgxRmRQYjNRUDc2SnkyRmM4WEp6UmFwZnFZM2w5SlExTzVnd0R1WXo1bWltUTZqVCsxMFJVaDZQQ3hPZVxucTVnRkl4SXE1TmFuSTBTRUkwMnV2MTc1OVNGV0ZDclhuWGI1bEVjbkxDQ0x0c0FPajdxeGVZVjNnbFIzZ0NwYlxuMTRBb29EZDFLeUROM2FMTno4OU9zM3NyVk1RVmRRSmIwZWppTS91QnI0N0Qyc2ZEemdTcm01UWQwd01yZytrVFxuV2U3MUhYa0JBZ01CQUFFQ2dnRUFIN210VGpScTdFSC80Q2pvZnQwVkdBWEpjdE5QRmFMZnkzQmZpbUpGSCtKS1xubkZoeHE1UVYvWXBWTWtFbzZ5NHNFNXRhUGRmcFRmclMwWkFjc09JWkcrUVFOOHFlSyticDBRNVNWRjJpUnNaNlxudXVVWjNmVHFUc3M4VzVOOUdDa04xQit4RFl2aFd6TG91ODdKZTR3K2R1RzZuTE9xMU43ZUpWcktFMENLN3A5bVxuMDdRcit2REZVeXpkaHRFNTduc1dxL2FVU1d1SHlkYWt1Z0R6eGVFRlhLR2J6ZlNXcDU5SnZJMDFIeWpOTXRQelxuR3RRUFlYeUUvZTUxK2FXSFZxaVZJSWpvbklqclVJV3pZZ2J5VTlBWm1zdFpKQzBKeVNaQSt5RW95elZZOFp2bFxuc2Q4TVJHaUxLWlIzMWR4WGFxNVo5dFJZVjJqeC9aQUxzYzROc28xYlV3S0JnUURXdENWS21XeTE1R0ROeXhFK1xuVHNYTElLZjYzSGRpMjI2VXpiaDY3a0lKNGJZK2E2cUl4U3hhWjlsdVJUN0tUQitKblhHQ1hzZDJCRE5GVUNTclxuSkhHS3NJUEVjeThqVkpaNUZCclcvUFkycEJRN0tHVWhEeHN6bGtKaDRWY3NtS2I5aXNuaVNpQllYMEpJU2RwU1xuK1g5Z3JDQWJFL0s5a2M2clJTM051Sjk3bXdLQmdRQzlKbDBqSUxoeUtXcXMrbk5rUXI5N1ZialpWL3lnbjJXUFxuUFhBejZvajA0S2ZRTmVxeFFNU0N5eW1IUTIrc3lIcitabzQ4NXc1YnBCeGJyMG9sQVdibWtkNk9kK3FlZGJNL1xuZ29yUk4yb0cyck5EbXlKM3dxRjJ6b1V5OG9Dd2hOMXNnaHM3cWdWVUZicHk5SGMvQnZXaERnbWdJS0ttUVgxYVxud1ZDMnVZSHRrd0tCZ1FDUituUHNiN3B4UlhEb0d5eURMNjNkK1RzZEhtN3h3UDVEb0VmUkZWUERRanJWNEFCWFxuODYrL1hDS0NqZ1F1S1dtNytGZG42NmMwUDVEWWpMQVJ5THFHTUpPMnF4WWVzSEdLcXpmQWVzZXd5UWlVWEZlK1xuRFhaU01kUzZsaXJlUUlBeG5QNjhvK2V3RGp5VHg5cndWWURjcXNzOWZlZXFLb3ZZK1RVMlRWUHFCd0tCZ0hqN1xuVnNzbkhKSjRoekRJcUpIU1Y2Tk5ld1FaVVE1enBZUHU2aHRxd2RyTzdzY3dGVUwyaURxWU02RytzbWt6ZWVmS1xuTk9RamJYMlVCRWRvWU9ZMmRWaTRxRDg3MkNjdVpVNFQ4ekpLWFZpdy9jUWFML3VsMDV5b0QyNDh5YThkN0hxQVxuNVdaT0kwWmE5M3liZk1JbGMycG1EaVlMZWIwWldsSjRIMllnVlVoZEFvR0JBS2Y4eEJScmh1L1hVYzZwRFc3WlxucDQyaW04b09qMmVrNURtUFovTTVBWG1nTkF6b3dubzA0S0hEWXRSWkhvQzJ1L0ViWkRCMWRrQUVjNEV0NHg5TFxubWFlTWVRcjB6dGxHVEFuYlhDbHNrMWhiM0h6REVEZGVmdVBxVnl2SlVEOUxlVFozeDNYQ21oR3VJRnBkaGE5ZlxuRGhhOUdUZFI0RUJ6Unl4ZUJuTDdkTjJoXG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXG4iLAogICJjbGllbnRfZW1haWwiOiAicGVya3NfdGVzdF9maXJlYmFzZS1hZG1pbnNkay1yMjViZEBwZXJrc2ZvcnUtOTI1NmMuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAicGVya3NfMTA0NTkzMjE5MjAzODY0MjE3NDg4IiwKICAiYXV0aF91cmkiOiAicGVya3NfaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAicGVya3NfaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAicGVya3NfaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAicGVya3NfaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9maXJlYmFzZS1hZG1pbnNkay1yMjViZCU0MHBlcmtzZm9ydS05MjU2Yy5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsCiAgInVuaXZlcnNlX2RvbWFpbiI6ICJnb29nbGVhcGlzLmNvbSIKfQ==";

module.exports = {
  moduleNameMapper,
  preset: "ts-jest",
  testEnvironment: "node",
  rootDir: "./",
  globals: {
    "ts-jest": {
      tsconfig: "./tsconfig.test.json",
    },
  },
};
